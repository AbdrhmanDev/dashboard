import{c as Y,d as Z}from"./chunk-ADCURCZL.js";import{a as _e,b as Ce,c as v,d as xe,e as S,f as he,g as Me}from"./chunk-U5BSPRHP.js";import{a as oe,b as re,c as ae,d as le,e as se,f as me,g as ce,h as de,i as pe,j as ue,k as fe,l as ge}from"./chunk-BMRYDPI6.js";import{a as W,c as q,e as G,f as J,h as K,i as X,j as ne,k as ie}from"./chunk-WCCRWDMN.js";import{y as H}from"./chunk-KW4BC5VN.js";import{a as V}from"./chunk-5ANO2BUK.js";import{a as ee,b as te}from"./chunk-PIP2ZZCO.js";import{Y as L,ba as $,ca as A,da as N,e as z,ea as j,f as B,fa as Q,i as F}from"./chunk-CTSDR7KC.js";import"./chunk-JSBFFIL7.js";import{Bb as d,Fb as y,Lb as i,Mb as o,Nb as x,Ob as p,Pb as u,Rb as E,Tb as g,Ub as f,Yb as w,Zb as b,_b as U,_c as I,ab as P,cc as r,dc as _,eb as s,gc as R,hc as T,ic as k,jb as C,kc as D,oa as h,pa as M,qb as O,ub as c}from"./chunk-3C7H3B7F.js";var Se=()=>[5,10,25,100];function we(t,e){t&1&&(i(0,"th",32),r(1,"Profile"),o())}function be(t,e){if(t&1&&(i(0,"td",33)(1,"div",34),x(2,"img",35),o()()),t&2){let n=e.$implicit,a=f();s(2),d("src",n.avatar||"assets/images/default-avatar.png",P)("alt",a.getFullName(n))}}function Ue(t,e){t&1&&(i(0,"th",36),r(1,"Name"),o())}function Pe(t,e){if(t&1&&(i(0,"td",33)(1,"div",37)(2,"span",38),r(3),o(),i(4,"span",39),r(5),o()()()),t&2){let n=e.$implicit,a=f();s(3),_(a.getFullName(n)),s(2),_(n.email)}}function Oe(t,e){t&1&&(i(0,"th",36),r(1,"Email"),o())}function ye(t,e){if(t&1&&(i(0,"td",33),r(1),o()),t&2){let n=e.$implicit;s(),_(n.email)}}function Ee(t,e){t&1&&(i(0,"th",32),r(1,"Phone"),o())}function Re(t,e){if(t&1&&(i(0,"td",33),r(1),o()),t&2){let n=e.$implicit;s(),_(n.phone||" ")}}function Te(t,e){t&1&&(i(0,"th",36),r(1,"Role"),o())}function ke(t,e){if(t&1&&(i(0,"td",33)(1,"span"),r(2),o()()),t&2){let n=e.$implicit,a=f();s(),y(a.getRoleClass(n.role)),s(),_(n.role)}}function De(t,e){t&1&&(i(0,"th",32),r(1,"Actions"),o())}function Ie(t,e){if(t&1){let n=E();i(0,"td",33)(1,"div",40)(2,"button",41),g("click",function(){let l=h(n).$implicit,m=f();return M(m.viewUserDetails(l._id))}),i(3,"mat-icon"),r(4,"visibility"),o()(),i(5,"button",42),g("click",function(){let l=h(n).$implicit,m=f();return M(m.editUser(l._id))}),i(6,"mat-icon"),r(7,"edit"),o()(),i(8,"button",43),g("click",function(){let l=h(n).$implicit,m=f();return M(m.deleteUser(l._id))}),i(9,"mat-icon"),r(10,"delete"),o()()()()}}function ze(t,e){t&1&&x(0,"tr",44)}function Be(t,e){t&1&&x(0,"tr",45)}var ve=class t{constructor(e,n,a,l){this.userService=e;this.snackBar=n;this.dialog=a;this.router=l}displayedColumns=["avatar","name","email","phone","role","actions"];filteredUsers=new ge;searchTerm="";selectedRole="all";paginator;sort;ngOnInit(){this.loadUsers()}ngAfterViewInit(){this.filteredUsers.paginator=this.paginator,this.filteredUsers.sort=this.sort}loadUsers(){let e={};this.selectedRole!=="all"&&(e.role=this.selectedRole),this.userService.getUsers(e).subscribe({next:n=>{this.filteredUsers.data=n},error:n=>{this.snackBar.open("Error loading users: "+n.message,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"})}})}onSearch(e){let n=e.target.value;this.filteredUsers.filter=n.trim().toLowerCase()}onRoleFilter(e){this.selectedRole=e,this.loadUsers()}getFullName(e){return`${e.name} `}getRoleClass(e){return`role-${e.toLowerCase()}`}viewUserDetails(e){this.router.navigate(["/users",e])}editUser(e){this.router.navigate(["/users/edit",e])}deleteUser(e){confirm("Are you sure you want to delete this user?")&&this.userService.deleteUser(e).subscribe({next:()=>{this.snackBar.open("User deleted successfully","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"}),this.loadUsers()},error:n=>{this.snackBar.open("Error deleting user: "+n.message,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"})}})}static \u0275fac=function(n){return new(n||t)(C(V),C(ee),C(Y),C(z))};static \u0275cmp=O({type:t,selectors:[["app-users"]],viewQuery:function(n,a){if(n&1&&(w(v,5),w(S,5)),n&2){let l;b(l=U())&&(a.paginator=l.first),b(l=U())&&(a.sort=l.first)}},decls:57,vars:8,consts:[[1,"page-container"],[1,"page-header"],[1,"header-content"],[1,"header-icon"],[1,"subtitle"],["mat-raised-button","","color","primary","routerLink","/create-users",1,"add-button"],[1,"filters-card","mat-elevation-z2"],[1,"search-field"],["appearance","outline",1,"search-input"],["matInput","","placeholder","Search by name, email...",3,"keyup","value"],["matSuffix",""],[1,"filter-fields"],["appearance","outline"],[3,"valueChange","selectionChange","value"],["value","all"],["value","Guest"],["value","Host"],["value","Admin"],[1,"users-table-container","mat-elevation-z8"],["mat-table","","matSort","",1,"users-table",3,"dataSource"],["matColumnDef","avatar"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","role"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","user-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","pageSize"],["mat-header-cell",""],["mat-cell",""],[1,"user-avatar"],[1,"profile-image",3,"src","alt"],["mat-header-cell","","mat-sort-header",""],[1,"user-info"],[1,"user-name"],[1,"user-email"],[1,"action-buttons"],["mat-icon-button","","color","primary","matTooltip","View Details",3,"click"],["mat-icon-button","","color","accent","matTooltip","Edit User",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete User",3,"click"],["mat-header-row",""],["mat-row","",1,"user-row"]],template:function(n,a){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1")(4,"mat-icon",3),r(5,"people"),o(),r(6," User Management "),o(),i(7,"p",4),r(8,"Manage and monitor user accounts"),o()(),i(9,"button",5)(10,"mat-icon"),r(11,"person_add"),o(),r(12," Add New User "),o()(),i(13,"div",6)(14,"div",7)(15,"mat-form-field",8)(16,"mat-label"),r(17,"Search Users"),o(),i(18,"input",9),g("keyup",function(m){return a.onSearch(m)}),o(),i(19,"mat-icon",10),r(20,"search"),o()()(),i(21,"div",11)(22,"mat-form-field",12)(23,"mat-label"),r(24,"Role"),o(),i(25,"mat-select",13),k("valueChange",function(m){return T(a.selectedRole,m)||(a.selectedRole=m),m}),g("selectionChange",function(m){return a.onRoleFilter(m.value)}),i(26,"mat-option",14),r(27,"All Roles"),o(),i(28,"mat-option",15),r(29,"Guest"),o(),i(30,"mat-option",16),r(31,"Host"),o(),i(32,"mat-option",17),r(33,"Admin"),o()()()()(),i(34,"div",18)(35,"table",19),p(36,20),c(37,we,2,0,"th",21)(38,be,3,2,"td",22),u(),p(39,23),c(40,Ue,2,0,"th",24)(41,Pe,6,2,"td",22),u(),p(42,25),c(43,Oe,2,0,"th",24)(44,ye,2,1,"td",22),u(),p(45,26),c(46,Ee,2,0,"th",21)(47,Re,2,1,"td",22),u(),p(48,27),c(49,Te,2,0,"th",24)(50,ke,3,3,"td",22),u(),p(51,28),c(52,De,2,0,"th",21)(53,Ie,11,0,"td",22),u(),c(54,ze,1,0,"tr",29)(55,Be,1,0,"tr",30),o(),x(56,"mat-paginator",31),o()()),n&2&&(s(18),d("value",a.searchTerm),s(7),R("value",a.selectedRole),s(10),d("dataSource",a.filteredUsers),s(19),d("matHeaderRowDef",a.displayedColumns),s(),d("matRowDefColumns",a.displayedColumns),s(),d("pageSizeOptions",D(7,Se))("pageSize",10))},dependencies:[I,F,B,H,fe,oe,ae,ce,le,re,de,se,me,pe,ue,xe,v,Me,S,he,X,K,G,W,q,ie,ne,L,N,$,A,Q,j,te,Z,Ce,_e,J],styles:[".page-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0;font-size:28px;font-weight:500;color:#1a1a1a}.header-icon[_ngcontent-%COMP%]{margin-right:12px;color:#ff385c}.subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.add-button[_ngcontent-%COMP%]{background-color:#ff385c!important;color:#fff!important}.add-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.filters-card[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:8px;margin-bottom:24px}.search-field[_ngcontent-%COMP%]{margin-bottom:16px}.search-input[_ngcontent-%COMP%]{width:100%;max-width:400px}.filter-fields[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.filter-fields[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:200px;max-width:300px}.users-table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden}.users-table[_ngcontent-%COMP%]{width:100%}.mat-mdc-header-cell[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;font-weight:600;font-size:14px}.mat-mdc-cell[_ngcontent-%COMP%]{color:#212529;font-size:14px}.user-row[_ngcontent-%COMP%]{transition:background-color .2s}.user-row[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden}.profile-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-name[_ngcontent-%COMP%]{font-weight:500;color:#1a1a1a}.user-email[_ngcontent-%COMP%]{font-size:12px;color:#666}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.role-admin[_ngcontent-%COMP%]{background-color:#4c51bf;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px}.role-host[_ngcontent-%COMP%]{background-color:#38a169;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px}.role-guest[_ngcontent-%COMP%]{background-color:#718096;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px}@media (max-width: 960px){.page-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.filter-fields[_ngcontent-%COMP%]{flex-direction:column}.filter-fields[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{max-width:100%}.action-buttons[_ngcontent-%COMP%]{flex-wrap:wrap}}@media (max-width: 768px){.users-table-container[_ngcontent-%COMP%]{overflow-x:auto}}"]})};export{ve as UsersComponent};
