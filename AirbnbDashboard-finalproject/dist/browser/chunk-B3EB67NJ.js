import{a as n,b as g,c as h,g as p}from"./chunk-FN5D4CQR.js";import{$ as o,ea as a,u as r}from"./chunk-3C7H3B7F.js";var d=class i{constructor(t){this.http=t}apiUrl=`${p.apiUrl}/Bookings`;getAuthHeaders(){let t=localStorage.getItem("access_token");return new n().set("Authorization",`Bearer ${t}`)}createBooking(t){return this.http.post(this.apiUrl,t,{headers:this.getAuthHeaders()}).pipe(r(e=>e.booking))}getBookings(){return this.http.get(this.apiUrl,{headers:this.getAuthHeaders()}).pipe(r(t=>t))}getBookingById(t){return this.http.get(`${this.apiUrl}/${t}`,{headers:this.getAuthHeaders()}).pipe(r(e=>e))}updateBooking(t,e){return this.http.put(`${this.apiUrl}/${t}`,e,{headers:this.getAuthHeaders()}).pipe(r(s=>s.booking))}cancelBooking(t){return this.http.patch(`${this.apiUrl}/${t}/cancel`,{},{headers:this.getAuthHeaders()})}confirmBooking(t){return this.http.patch(`${this.apiUrl}/${t}/confirm`,{},{headers:this.getAuthHeaders()})}updatePaymentStatus(t,e){return this.http.patch(`${this.apiUrl}/${t}/payment`,{paymentStatus:e},{headers:this.getAuthHeaders()}).pipe(r(s=>s.booking))}getUserBookings(t){return this.http.get(`${this.apiUrl}/user/${t}`,{headers:this.getAuthHeaders()}).pipe(r(e=>e.bookings))}getHostBookings(t){return this.http.get(`${this.apiUrl}/host/${t}`,{headers:this.getAuthHeaders()}).pipe(r(e=>e.bookings))}getPropertyBookings(t){return this.http.get(`${this.apiUrl}/property/${t}`,{headers:this.getAuthHeaders()}).pipe(r(e=>e.bookings))}checkAvailability(t,e,s){let l=new g().set("startDate",e.toISOString()).set("endDate",s.toISOString());return this.http.get(`${this.apiUrl}/property/${t}/availability`,{params:l,headers:this.getAuthHeaders()}).pipe(r(k=>k.available))}deleteBooking(t){return this.http.delete(`${this.apiUrl}/${t}`,{headers:this.getAuthHeaders()}).pipe(r(()=>{}))}static \u0275fac=function(e){return new(e||i)(a(h))};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};export{d as a};
