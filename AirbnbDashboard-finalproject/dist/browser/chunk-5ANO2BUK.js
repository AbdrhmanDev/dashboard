import{a as n,c as h,g as u}from"./chunk-JSBFFIL7.js";import{$ as p,ea as o,u as s}from"./chunk-3C7H3B7F.js";var g=class i{constructor(e){this.http=e}apiUrl=`${u.apiUrl}/users`;getAuthHeaders(){let e=localStorage.getItem("access_token");return new n().set("Authorization",`Bearer ${e}`)}getUsers(e){let t=this.apiUrl;if(e){let r=new URLSearchParams;e.role&&r.append("role",e.role),e.status&&r.append("status",e.status),t+=`?${r.toString()}`}return this.http.get(t,{headers:this.getAuthHeaders()})}getUserById(e){return this.http.get(`${this.apiUrl}/${e}`,{headers:this.getAuthHeaders()}).pipe(s(t=>{if(!t.user)throw new Error(t.message||"User not found");return t.user}))}createUser(e){return this.http.post(`${this.apiUrl}/register`,e).pipe(s(t=>{if(!t.user)throw new Error(t.message||"Failed to create user");return t.user}))}updateUser(e,t){return this.http.patch(`${this.apiUrl}/${e}`,t,{headers:this.getAuthHeaders()}).pipe(s(r=>{if(!r.user)throw new Error(r.message||"Failed to update user");return r.user}))}deleteUser(e){return this.http.delete(`${this.apiUrl}/${e}`,{headers:this.getAuthHeaders()}).pipe(s(t=>{if(t.message!=="User deleted successfully")throw new Error(t.message||"Failed to delete user")}))}updateavatar(e,t){let r=new FormData;return r.append("avatar",t),this.http.put(`${this.apiUrl}/${e}/profile-image`,r,{headers:this.getAuthHeaders()}).pipe(s(a=>{if(!a.user)throw new Error(a.message||"Failed to update profile image");return a.user}))}toggleUserStatus(e){return this.http.patch(`${this.apiUrl}/${e}/toggle-status`,{},{headers:this.getAuthHeaders()}).pipe(s(t=>{if(!t.user)throw new Error(t.message||"Failed to toggle user status");return t.user}))}getUserBookings(e){return this.http.get(`${this.apiUrl}/${e}/bookings`,{headers:this.getAuthHeaders()})}getHostReviews(e){return this.http.get(`${this.apiUrl}/${e}/reviews`,{headers:this.getAuthHeaders()})}toggleSuperHostStatus(e){return this.http.patch(`${this.apiUrl}/${e}/toggle-superhost`,{},{headers:this.getAuthHeaders()}).pipe(s(t=>{if(!t.user)throw new Error(t.message||"Failed to toggle superhost status");return t.user}))}changePassword(e,t,r){return this.http.post(`${this.apiUrl}/${e}/change-password`,{currentPassword:t,newPassword:r},{headers:this.getAuthHeaders()}).pipe(s(a=>{if(a.error)throw new Error(a.message||"Failed to change password")}))}searchUsers(e){return this.http.get(`${this.apiUrl}/search`,{params:{q:e},headers:this.getAuthHeaders()})}static \u0275fac=function(t){return new(t||i)(o(h))};static \u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"})};export{g as a};
